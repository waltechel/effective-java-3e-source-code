
---
# 아이템 18. 상속보다는 컴포지션을 사용하라.

---
## 상속해서 사용할 경우 많은 문제가 존재한다.
- 부모 메서드가 자기 자신의 메서드를 사용했는지를 알수 없으므로, 문제가 발생할 수 있다.
- 다음 릴리스에서 부모의 메서드는 변덕을 일으킬 수 있으므로, 부모의 메서드가 ~~~ 할 것이라는 가정에 기댄 개발은 언젠가 추가적인 유지보수를 불러온다.
- 하위 메서드에 추가한 메서드와 시그니처가 같고 반환 타입이 다르다면 하위 클래스에서 문제가 발생한다.
- 하위 클래스의 메서드가 상위 클래스의 메서드가 유구하는 규약을 만족하지 못할 가능성이 높다.

---
## 대안
- 기존 클래스를 확장하는 대신, 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조하게 한다.
- 컴포지션
	- 기존 클래스가 새로운 클래스의 구성요소로 쓰인다.
	- 새 클래스의 인스턴스 메서드들은 기존 클래스의 대응 메서드를 호출해 그 결과를 반환한다
	- 전달 메서드 : 새 클래스의 메서드가 기존 클래스의 메서드를 호출하는 것
- 컴포지션으로는 확장하려는 클래스의 API에 아무런 결함이 없는

---
## 다른 관점
- 래퍼 클래스 : 다른 인스턴스를 감싸고 있다는 뜻
- 데코레이터 패턴 : 다른 인스턴스의 기능을 추가한다는 뜻
- 컴포지션과 forwarding의 조합은 넓은 의미로 위임(deligating)이라고 한다.

---
## 약간의 단점
- 콜백 프레임워크와 잘 어울리지 않는다.
- 콜백 때는 래퍼 클래스가 아니라 내부 객체를 호출하게 된다.
- 전달 메서드를 작성하는 것이 지루하다.


---
## 핵심 정리
* 상속은 캡슐화를 해친다는 문제가 있다.
- 상속은 상-하위 클래스가 순수히 is-a 관계일 때만 사용하여야 한다.
- 상속의 취약점을 피하려면 상속 대신 컴포지션과 포워딩을 사용하자.
